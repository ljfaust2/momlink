<script type="text/javascript" src="../js/load_essentials.js"></script>
<body ng-app="starter" ng-controller="HeaderBarController">
    <script type="text/javascript" src="../js/header.js"></script>
    <ion-pane>
        <ion-view>
            <ion-content overflow-scroll="false" class="has-header" ng-app="plugins" ng-controller="EventController">
                <div class="row">
                    <p style="text-indent: 5px;">Select Event Type</p>
                </div>  
                <div class="row row-no-padding padding-bottom">
                    <div class="col"><center><input id="obappt" class="col" type="image"  ng-click="select('obappt')" src="../img/temp/obappt.PNG" style="width:50px;height:50px;vertical-align:middle" />OB Appt</center></div>
                    <div class="col"><center><input id="tests" class="col" type="image" ng-click="select('tests')" src="../img/temp/tests.PNG" style="width:50px;height:50px;vertical-align:middle" />Tests</center></div>
                    <div class="col"><center><input id="visits" class="col" type="image" ng-click="select('visits')" src="../img/temp/visits.PNG" style="width:50px;height:50px;vertical-align:middle" />Visits</center></div>
                    <div class="col"><center><input id="ultra" class="col" type="image" ng-click="select('ultra')" src="../img/temp/ultra.PNG" style="width:50px;height:50px;vertical-align:middle" />Ultra</center></div>
                    <div class="col"><center><input id="classes" class="col" type="image" ng-click="select('classes')" src="../img/temp/classes.PNG" style="width:50px;height:50px;vertical-align:middle" />Classes</center></div>
                </div>   
                <div class="list">
                    <label class="item item-input item-stacked-label">
                        <span class="input-label">Date</span>
                        <input type="date">
                    </label>
                    <center><canvas id="canvas" width="200" height="200"></canvas></center>
                    <label class="item item-input item-stacked-label">
                        <span class="input-label">Time</span>
                        <input type="time" id="eventTime" onchange="drawClock()" placeholder="Time">
                    </label>
                    <script>
                        var canvas = document.getElementById("canvas");
                        var ctx = canvas.getContext("2d");
                        var radius = canvas.height / 2;
                        ctx.translate(radius, radius);
                        radius = radius * 0.90
                        drawClock();

                        function drawClock() {
                          drawFace(ctx, radius);
                          drawNumbers(ctx, radius);
                          drawTime(ctx, radius);
                        }
                        function drawFace(ctx, radius) {
                          var grad;
                          ctx.beginPath();
                          ctx.arc(0, 0, radius, 0, 2*Math.PI);
                          ctx.fillStyle = 'white';
                          ctx.fill();
                          grad = ctx.createRadialGradient(0,0,radius*0.95, 0,0,radius*1.05);
                          grad.addColorStop(0, '#333');
                          ctx.lineWidth = radius*0.04;
                          ctx.stroke();
                          ctx.beginPath();
                          ctx.arc(0, 0, radius*0.1, 0, 2*Math.PI);
                          ctx.fillStyle = '#333';
                          ctx.fill();
                        }
                        function drawNumbers(ctx, radius) {
                          var ang;
                          var num;
                          ctx.font = radius*0.15 + "px arial";
                          ctx.textBaseline="middle";
                          ctx.textAlign="center";
                          for(num = 1; num < 13; num++){
                            ang = num * Math.PI / 6;
                            ctx.rotate(ang);
                            ctx.translate(0, -radius*0.85);
                            ctx.rotate(-ang);
                            ctx.fillText(num.toString(), 0, 0);
                            ctx.rotate(ang);
                            ctx.translate(0, radius*0.85);
                            ctx.rotate(-ang);
                          }
                        }
                        function drawTime(ctx, radius){
                            var input = document.getElementById("eventTime").value;
                            var hour = parseInt(input.slice(0, 2));
                            var minute = parseInt(input.slice(3, 5));
                            //hour
                            hour = hour % 12;
                            hour = (hour * Math.PI / 6) + (minute * Math.PI / (6 * 60));
                            drawHand(ctx, hour, radius * 0.5, radius * 0.07);
                            //minute
                            minute = (minute * Math.PI / 30);
                            drawHand(ctx, minute, radius * 0.8, radius * 0.07);
                        }
                        function drawHand(ctx, pos, length, width) {
                            ctx.beginPath();
                            ctx.lineWidth = width;
                            ctx.lineCap = "round";
                            ctx.moveTo(0,0);
                            ctx.rotate(pos);
                            ctx.lineTo(0, -length);
                            ctx.stroke();
                            ctx.rotate(-pos);
                        }
                    </script>
                        <label class="item item-input item-stacked-label">
                            <span class="input-label">Location</span>
                            <input type="text" placeholder="Location">
                        </label>
                </div>
                <center>
                    <div class="row" ng-controller="PopupCtrl">
                        <div class="col">
                            <img src="../img/temp/save.png" ng-click="addEvent()" style="width:25px; height:25px;" />
                        </div>
                        <div class="col">
                            <img src="../img/temp/delete.png" style="width:25px; height:25px;" />
                        </div>
                    </div>
                </center>
            </ion-content>
        </ion-view>
    </ion-pane>
</body>
<script type="text/javascript" src="../js/load_essentialsEnd.js"></script>
